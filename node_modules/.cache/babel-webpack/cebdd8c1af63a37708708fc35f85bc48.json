{"ast":null,"code":"import _asyncToGenerator from \"/Users/Tony/Desktop/X/Development/Catalogue/catalogue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nexport var StorageKey;\n\n(function (StorageKey) {\n  StorageKey[\"Cart\"] = \"cart\";\n})(StorageKey || (StorageKey = {}));\n\nexport var StorageError;\n\n(function (StorageError) {\n  StorageError[\"NullData\"] = \"Null data\";\n})(StorageError || (StorageError = {}));\n\nexport class StorageService {\n  constructor() {\n    this.storageValueList = {};\n  }\n\n  get storage() {\n    return localStorage;\n  }\n\n  set(preference, value) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.storage.setItem(preference, JSON.stringify(value));\n      _this.storageValueList[preference] = value;\n      return value;\n    })();\n  }\n\n  get(preference, returnNull = false) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let value = _this2.storageValueList[preference];\n      if (value) return value;\n      const data = yield _this2.storage.getItem(preference);\n      const parseData = JSON.parse(data);\n      if (!parseData) _this2.storageValueList[preference] = parseData;\n      return parseData;\n    })();\n  }\n\n  remove(preference) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this3.storage.removeItem) localStorage.removeItem(preference);\n      if (_this3.storage.remove) yield _this3.storage.remove(preference);\n      _this3.storageValueList[preference] = null;\n    })();\n  }\n\n  removeAll() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      yield Object.values(StorageKey).forEach(preference => {\n        if (_this4.storage.removeItem) localStorage.removeItem(preference);\n        if (_this4.storage.remove) _this4.storage.remove(preference);\n        _this4.storageValueList[preference] = null;\n      });\n    })();\n  }\n\n}\n\nStorageService.ɵfac = function StorageService_Factory(t) {\n  return new (t || StorageService)();\n};\n\nStorageService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: StorageService,\n  factory: StorageService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["/Users/Tony/Desktop/X/Development/Catalogue/catalogue/src/app/services/localstorage/storage.service.ts"],"names":["i0","StorageKey","StorageError","StorageService","constructor","storageValueList","storage","localStorage","set","preference","value","setItem","JSON","stringify","get","returnNull","data","getItem","parseData","parse","remove","removeItem","removeAll","Object","values","forEach","ɵfac","StorageService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,OAAO,IAAIC,UAAJ;;AACP,CAAC,UAAUA,UAAV,EAAsB;AACnBA,EAAAA,UAAU,CAAC,MAAD,CAAV,GAAqB,MAArB;AACH,CAFD,EAEGA,UAAU,KAAKA,UAAU,GAAG,EAAlB,CAFb;;AAGA,OAAO,IAAIC,YAAJ;;AACP,CAAC,UAAUA,YAAV,EAAwB;AACrBA,EAAAA,YAAY,CAAC,UAAD,CAAZ,GAA2B,WAA3B;AACH,CAFD,EAEGA,YAAY,KAAKA,YAAY,GAAG,EAApB,CAFf;;AAGA,OAAO,MAAMC,cAAN,CAAqB;AACxBC,EAAAA,WAAW,GAAG;AACV,SAAKC,gBAAL,GAAwB,EAAxB;AACH;;AACU,MAAPC,OAAO,GAAG;AACV,WAAOC,YAAP;AACH;;AACKC,EAAAA,GAAG,CAACC,UAAD,EAAaC,KAAb,EAAoB;AAAA;;AAAA;AACzB,YAAM,KAAI,CAACJ,OAAL,CAAaK,OAAb,CAAqBF,UAArB,EAAiCG,IAAI,CAACC,SAAL,CAAeH,KAAf,CAAjC,CAAN;AACA,MAAA,KAAI,CAACL,gBAAL,CAAsBI,UAAtB,IAAoCC,KAApC;AACA,aAAOA,KAAP;AAHyB;AAI5B;;AACKI,EAAAA,GAAG,CAACL,UAAD,EAAaM,UAAU,GAAG,KAA1B,EAAiC;AAAA;;AAAA;AACtC,UAAIL,KAAK,GAAG,MAAI,CAACL,gBAAL,CAAsBI,UAAtB,CAAZ;AACA,UAAIC,KAAJ,EACI,OAAOA,KAAP;AACJ,YAAMM,IAAI,SAAS,MAAI,CAACV,OAAL,CAAaW,OAAb,CAAqBR,UAArB,CAAnB;AACA,YAAMS,SAAS,GAAGN,IAAI,CAACO,KAAL,CAAWH,IAAX,CAAlB;AACA,UAAI,CAACE,SAAL,EACI,MAAI,CAACb,gBAAL,CAAsBI,UAAtB,IAAoCS,SAApC;AACJ,aAAOA,SAAP;AARsC;AASzC;;AACKE,EAAAA,MAAM,CAACX,UAAD,EAAa;AAAA;;AAAA;AACrB,UAAI,MAAI,CAACH,OAAL,CAAae,UAAjB,EACId,YAAY,CAACc,UAAb,CAAwBZ,UAAxB;AACJ,UAAI,MAAI,CAACH,OAAL,CAAac,MAAjB,EACI,MAAM,MAAI,CAACd,OAAL,CAAac,MAAb,CAAoBX,UAApB,CAAN;AACJ,MAAA,MAAI,CAACJ,gBAAL,CAAsBI,UAAtB,IAAoC,IAApC;AALqB;AAMxB;;AACKa,EAAAA,SAAS,GAAG;AAAA;;AAAA;AACd,YAAMC,MAAM,CAACC,MAAP,CAAcvB,UAAd,EAA0BwB,OAA1B,CAAmChB,UAAD,IAAgB;AACpD,YAAI,MAAI,CAACH,OAAL,CAAae,UAAjB,EACId,YAAY,CAACc,UAAb,CAAwBZ,UAAxB;AACJ,YAAI,MAAI,CAACH,OAAL,CAAac,MAAjB,EACI,MAAI,CAACd,OAAL,CAAac,MAAb,CAAoBX,UAApB;AACJ,QAAA,MAAI,CAACJ,gBAAL,CAAsBI,UAAtB,IAAoC,IAApC;AACH,OANK,CAAN;AADc;AAQjB;;AArCuB;;AAuC5BN,cAAc,CAACuB,IAAf,GAAsB,SAASC,sBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAO,KAAKA,CAAC,IAAIzB,cAAV,GAAP;AAAqC,CAAhG;;AACAA,cAAc,CAAC0B,KAAf,GAAuB,aAAc7B,EAAE,CAAC8B,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAE5B,cAAT;AAAyB6B,EAAAA,OAAO,EAAE7B,cAAc,CAACuB,IAAjD;AAAuDO,EAAAA,UAAU,EAAE;AAAnE,CAAtB,CAArC","sourcesContent":["import * as i0 from \"@angular/core\";\nexport var StorageKey;\n(function (StorageKey) {\n    StorageKey[\"Cart\"] = \"cart\";\n})(StorageKey || (StorageKey = {}));\nexport var StorageError;\n(function (StorageError) {\n    StorageError[\"NullData\"] = \"Null data\";\n})(StorageError || (StorageError = {}));\nexport class StorageService {\n    constructor() {\n        this.storageValueList = {};\n    }\n    get storage() {\n        return localStorage;\n    }\n    async set(preference, value) {\n        await this.storage.setItem(preference, JSON.stringify(value));\n        this.storageValueList[preference] = value;\n        return value;\n    }\n    async get(preference, returnNull = false) {\n        let value = this.storageValueList[preference];\n        if (value)\n            return value;\n        const data = await this.storage.getItem(preference);\n        const parseData = JSON.parse(data);\n        if (!parseData)\n            this.storageValueList[preference] = parseData;\n        return parseData;\n    }\n    async remove(preference) {\n        if (this.storage.removeItem)\n            localStorage.removeItem(preference);\n        if (this.storage.remove)\n            await this.storage.remove(preference);\n        this.storageValueList[preference] = null;\n    }\n    async removeAll() {\n        await Object.values(StorageKey).forEach((preference) => {\n            if (this.storage.removeItem)\n                localStorage.removeItem(preference);\n            if (this.storage.remove)\n                this.storage.remove(preference);\n            this.storageValueList[preference] = null;\n        });\n    }\n}\nStorageService.ɵfac = function StorageService_Factory(t) { return new (t || StorageService)(); };\nStorageService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: StorageService, factory: StorageService.ɵfac, providedIn: 'root' });\n"]},"metadata":{},"sourceType":"module"}